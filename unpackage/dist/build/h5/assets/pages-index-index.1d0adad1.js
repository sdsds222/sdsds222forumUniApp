import{g as a,s,a as t,b as e,n,r as i,o as l,c as o,w as r,i as d,d as c,e as u,f as g,F as h,h as w,j as p,v as m,k as f,S as v,l as _,m as k,p as A,t as D}from"./index-94c27637.js";import{r as N,_ as x}from"./uni-app.es.89cfa6ed.js";import{h as I}from"./host.9c9b05ea.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";const j=P({data:()=>({title:"Hello",navIndex:0,navArr:[],newsArr:[],currentPage:1,nowId:1,loading:0}),onLoad(){this.getNavData(),this.getNewsData()},onShow(){""==a("jwt-token")?s({title:"首页(未登录)"}):s({title:"首页"})},onReachBottom(){console.log("到底部了"),this.loading=1,this.currentPage++,this.getNewsData()},onPullDownRefresh(){let a=this;t({success(){setTimeout((function(){e(),a.currentPage=1,a.newsArr=[],a.getNavData(),a.getNewsData()}),500)}})},methods:{clickNav(a,s){this.newsArr=[];let t=this;setTimeout((function(){t.navIndex=a,t.currentPage=1,t.nowId=s,t.loading=0,t.getNewsData()}),50)},goDetail(a){n({url:`/pages/detail/detail?cid=${a.classid}&id=${a.id}`,animationType:"pop-in"})},getNavData(){i({url:I+"/uniapp/navlist",success:a=>{this.navArr=a.data.data}})},getNewsData(){i({url:I+"/uniapp/newslist",data:{num:8,cid:this.nowId,page:this.currentPage},success:a=>{0!=a.data.data.length&&1!=this.currentPage||(this.loading=2),this.newsArr=[...this.newsArr,...a.data.data]}})}}},[["render",function(a,s,t,e,n,i){const I=d,P=v,j=N(_("newsbox"),x),y=k;return l(),o(I,{class:"home"},{default:r((()=>[c(P,{"scroll-x":"true",class:"navscroll"},{default:r((()=>[(l(!0),u(h,null,g(n.navArr,((a,s)=>(l(),o(I,{class:A(["item",s==n.navIndex?"active":""]),key:a.id,onClick:t=>i.clickNav(s,a.id)},{default:r((()=>[f(D(a.classname),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),c(I,{class:"content"},{default:r((()=>[(l(!0),u(h,null,g(n.newsArr,(a=>(l(),u("div",{class:"row",key:a.id},[c(j,{item:a,onClick:s=>i.goDetail(a)},{default:r((()=>[f(" 这是一条新闻。 ")])),_:2},1032,["item","onClick"])])))),128))])),_:1}),0==n.newsArr.length?(l(),o(I,{key:0,class:"nodata"},{default:r((()=>[c(y,{src:"/assets/nodata-1be3dea3.png",mode:"widthFix"})])),_:1})):w("",!0),p(c(I,{class:"loading"},{default:r((()=>[c(I),1==n.loading?(l(),o(I,{key:0},{default:r((()=>[f("数据加载中......")])),_:1})):w("",!0),2==n.loading?(l(),o(I,{key:1},{default:r((()=>[f("没有更多数据了")])),_:1})):w("",!0)])),_:1},512),[[m,n.newsArr.length]])])),_:1})}],["__scopeId","data-v-50780142"]]);export{j as default};
