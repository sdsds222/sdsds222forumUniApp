import{g as a,r as e,D as t,z as s,A as o,o as l,c as n,w as i,i as d,u as r,d as u,k as c,h as p,t as m,I as h,H as g}from"./index-94c27637.js";import{p as f}from"./jwt.dd2c00ad.js";import{h as w}from"./host.9c9b05ea.js";import{_ as S}from"./_plugin-vue_export-helper.1b428a4d.js";const k=S({data:()=>({username:"",password:"",loginState:!1}),onShow(){this.username="",this.password="";let t=a("jwt-token");e({url:w+"/uniapp/test",method:"POST",header:{token:t},success:a=>{"LOGIN"==a.data.data?(console.log("登录成功"),this.loginState=!0,this.username=f(t).username):(console.log("登录失败"),this.loginState=!1)}})},methods:{login(){""!=this.username&&""!=this.password?e({url:w+"/login",method:"POST",data:{username:this.username,password:this.password},success:a=>{console.log(a.data),"NOT_LOGIN"==a.data.data||null==a.data.data?(s({title:"登陆失败，密码错误",icon:"loading",duration:1e3}),this.loginState=!1):(s({title:"登陆成功",icon:"success",duration:1e3}),this.loginState=!0,console.log(a.data.data),o("jwt-token",a.data.data))},fail:a=>{console.error("请求失败",a),s({title:"操作失败",icon:"loading",duration:1e3}),this.loginState=!1}}):t({title:"登录错误",content:"账号和密码不能为空",success:a=>{a.confirm||a.cancel}})},unlogin(){o("jwt-token",""),this.loginState=!1}}},[["render",function(a,e,t,s,o,f){const w=h,S=g,k=d;return l(),n(k,{class:"container"},{default:i((()=>[0==o.loginState?(l(),n(k,{key:0},{default:i((()=>[r("p",null,"用户名："),u(w,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),type:"text",placeholder:"请输入用户名"},null,8,["modelValue"]),r("p",null,"密码："),u(w,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"text",placeholder:"请输入密码"},null,8,["modelValue"]),r("p",null,"如果用户名不存在则自动注册账号"),u(S,{onClick:f.login},{default:i((()=>[c("登录或注册")])),_:1},8,["onClick"])])),_:1})):p("",!0),1==o.loginState?(l(),n(k,{key:1},{default:i((()=>[r("p",{class:"text"},[c("用户："+m(o.username),1),r("br"),c("您已成功登录")]),u(S,{onClick:f.unlogin},{default:i((()=>[c("退出登录")])),_:1},8,["onClick"])])),_:1})):p("",!0)])),_:1})}],["__scopeId","data-v-51a3546d"]]);export{k as default};
