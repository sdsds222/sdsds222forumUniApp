import{r as t,z as e,s as a,g as s,A as i,o as l,c as d,w as o,i as n,d as r,k as c,t as p,B as u}from"./index-94c27637.js";import{h}from"./host.9c9b05ea.js";import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";function f(t,e){if(0===arguments.length||!t)return null;const a=e||"{y}-{m}-{d} {h}:{i}:{s}";let s;"object"==typeof t?s=t:("string"==typeof t&&/^[0-9]+$/.test(t)?t=parseInt(t):"string"==typeof t&&(t=t.replace(new RegExp(/-/gm),"/").replace("T"," ").replace(new RegExp(/\.[\d]{3}/gm),"")),"number"==typeof t&&10===t.toString().length&&(t*=1e3),s=new Date(t));const i={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),a:s.getDay()},l=a.replace(/{(y|m|d|h|i|s|a)+}/g,((t,e)=>{let a=i[e];return"a"===e?["日","一","二","三","四","五","六"][a]:(t.length>0&&a<10&&(a="0"+a),a||0)}));return l}const m=g({data:()=>({options:null,detail:{}}),onLoad(t){this.options=t,this.getDetail()},methods:{getDetail(){t({url:h+"/uniapp/detail",data:this.options,success:t=>{0!=t.data.code?(t.data.data.posttime=f(t.data.data.posttime),t.data.data.content=t.data.data.content.replace(/<img/gi,'<img style="max-width:100%;height:auto;display:block"'),this.detail=t.data.data,a({title:this.detail.title}),this.saveHistory()):e({title:"操作失败",icon:"loading",duration:1e3})}})},saveHistory(){let t=s("historyArr")||[],e={id:this.detail.id,classid:this.detail.classid,picurl:this.detail.picurl,title:this.detail.title,looktime:f(Date.now())},a=t.findIndex((t=>t.id==this.detail.id));a>=0&&t.splice(a,1),t.unshift(e),i("historyArr",t)}}},[["render",function(t,e,a,s,i,h){const g=n,f=u;return l(),d(g,{class:"detail"},{default:o((()=>[r(g,{class:"title"},{default:o((()=>[c(p(i.detail.title),1)])),_:1}),r(g,{class:"info"},{default:o((()=>[r(g,{class:"author"},{default:o((()=>[c("编辑："+p(i.detail.author),1)])),_:1}),r(g,{class:"time"},{default:o((()=>[c("发布日期："+p(i.detail.posttime),1)])),_:1})])),_:1}),r(g,{class:"content"},{default:o((()=>[r(f,{nodes:i.detail.content},null,8,["nodes"])])),_:1}),r(g,{class:"description"},{default:o((()=>[c("版权声明：本APP所有内容与APP作者无关")])),_:1})])),_:1})}],["__scopeId","data-v-b61925d6"]]);export{m as default};
